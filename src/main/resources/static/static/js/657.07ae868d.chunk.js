"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[657],{2407:(e,r,t)=>{t.d(r,{l:()=>n});const o=t(6213).A.create({baseURL:"http://localhost:8080/api/",headers:{"Content-Type":"application/json",Accept:"application/json"}});o.interceptors.request.use((e=>{var r;return console.log(`${null===(r=e.method)||void 0===r?void 0:r.toUpperCase()} ${e.url}`,e),e}),(e=>(console.error("REQ FAIL: ",e),Promise.reject(e)))),o.interceptors.response.use((e=>(console.log("RES: ",e),e)),(async e=>{var r,t;return console.error(`${e.config.method.toUpperCase()}: ${e.config.url} ${e.code}`,e),null!==(r=e.response)&&void 0!==r&&null!==(t=r.data)&&void 0!==t&&t.message?Promise.resolve(e.response):Promise.reject(e)}));const n={async getPlans(e){try{return(await o.get(`/curriculum/${e}/all`)).data}catch(r){return console.error("Error fetching plans:",r),[]}},async getAllCurriculums(){try{return(await o.get("/curriculum/")).data}catch(e){return console.error("Error fetching all curriculums:",e),[]}},async importSingleFile(e){try{const r=new FormData;r.append("file",e);return(await o.post("/import/single",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){return console.error("Error importing file:",r),[]}},async importMultiFile(e){try{const r=new FormData;e.forEach((e=>{r.append("file",e)}));return(await o.post("/import/multiple",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){return console.error("Error importing file:",r),[]}},async importDirectory(e){try{return(await o.post("/import/directory",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){return console.error("Error fetching all curriculums:",r),[]}},async getCourse(){try{return(await o.get("/export/")).data}catch(e){return console.error("Error fetching all courses:",e),[]}}}},2657:(e,r,t)=>{t.r(r),t.d(r,{default:()=>g});var o=t(5043),n=t(7234),a=t(4496),l=t(2407),i=t(7353),c=t(9980),s=t(8424),d=t(3374),p=t(8400),u=t(9931),m=t(579);const h=e=>{var r;let{onFileSelected:t,onDirectorySelected:n,acceptedFileTypes:l={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},maxFiles:h=1}=e;const[y,x]=(0,o.useState)(""),[g,f]=(0,o.useState)([]),[v,j]=(0,o.useState)(null),b=(0,o.useRef)(null);(0,o.useEffect)((()=>{b.current&&(b.current.setAttribute("webkitdirectory","true"),b.current.setAttribute("directory","true"))}),[]);const{getRootProps:A,getInputProps:C,isDragActive:w}=(0,s.VB)({onDrop:e=>{const r=e.filter((e=>{var r;const t=(null===(r=e.name.split(".").pop())||void 0===r?void 0:r.toLowerCase())||"";return Object.values(l).flat().map((e=>e.replace(".",""))).includes(t)}));r.length>0&&(f(r),j("file"),t&&1===r.length&&t(r[0]))},accept:l,maxFiles:h,noClick:!0,noKeyboard:!0});return(0,m.jsx)(i.A,{sx:{textAlign:"center",mt:4},children:v?(0,m.jsxs)(i.A,{sx:{border:"1px solid",borderColor:"primary.main",borderRadius:"8px",padding:3,backgroundColor:"background.paper"},children:["file"===v?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(a.A,{variant:"body1",color:"text.primary",children:["\u0412\u044b\u0431\u0440\u0430\u043d \u0444\u0430\u0439\u043b: ",null===(r=g[0])||void 0===r?void 0:r.name]}),g.length>1&&(0,m.jsxs)(a.A,{variant:"body2",color:"text.secondary",children:["\u0418 \u0435\u0449\u0435 ",g.length-1," \u0444\u0430\u0439\u043b\u043e\u0432"]})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(a.A,{variant:"body1",color:"text.primary",children:["\u0412\u044b\u0431\u0440\u0430\u043d\u0430 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f: ",y]}),(0,m.jsxs)(a.A,{variant:"body2",color:"text.secondary",children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0444\u0430\u0439\u043b\u043e\u0432: ",g.length]})]}),(0,m.jsx)(c.A,{variant:"text",color:"error",onClick:()=>{f([]),x(""),j(null)},sx:{mt:2},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u044b\u0431\u043e\u0440"})]}):(0,m.jsxs)(i.A,{...A(),sx:{textAlign:"center",border:"2px dashed",borderColor:w?"primary.main":"grey.300",width:"100%",padding:"40px",borderRadius:"8px",backgroundColor:w?"action.hover":"background.paper","&:hover":{backgroundColor:"action.hover",borderColor:"primary.main"}},children:[(0,m.jsx)("input",{...C()}),(0,m.jsx)("input",{type:"file",ref:b,multiple:!0,onChange:e=>{const r=e.target.files;if(!r||0===r.length)return;const t=Array.from(r);if(t.length>0){const e=t[0].webkitRelativePath.split("/")[0];console.log("Selected directory:",e),console.log("Total files:",t.length),f(t),x(e),j("directory"),n&&n(e,t)}},style:{display:"none"},id:"directory-picker"}),(0,m.jsx)(d.A,{sx:{fontSize:60,color:"primary.main",mb:2}}),(0,m.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:w?"\u041e\u0442\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0437\u0434\u0435\u0441\u044c":"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0441\u044e\u0434\u0430 \u0438\u043b\u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u043f\u0446\u0438\u044e \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}),(0,m.jsxs)(i.A,{sx:{display:"flex",justifyContent:"center",gap:2,mt:2},children:[(0,m.jsx)(c.A,{variant:"contained",color:"primary",startIcon:(0,m.jsx)(u.A,{}),onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=Object.values(l).flat().join(","),e.multiple=h>1,e.onchange=e=>{const r=e.target;if(r.files&&r.files.length>0){const e=Array.from(r.files);f(e),j("file"),t&&1===e.length&&t(e[0])}},e.click()},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b"}),(0,m.jsx)("label",{htmlFor:"directory-picker",children:(0,m.jsx)(c.A,{variant:"outlined",color:"primary",component:"span",startIcon:(0,m.jsx)(p.A,{}),children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e"})})]}),(0,m.jsxs)(a.A,{variant:"body2",color:"text.secondary",sx:{mt:2},children:["\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u044b"," ",Object.values(l).flat().join(", ")]})]})})};var y=t(6159),x=t.n(y);function g(){const[e,r]=(0,o.useState)(!1);return(0,m.jsxs)(n.A,{maxWidth:"md",sx:{mt:4},children:[(0,m.jsx)(a.A,{variant:"h4",gutterBottom:!0,align:"center",children:"\u0406\u043c\u043f\u043e\u0440\u0442 \u043d\u0430\u0432\u0447\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043b\u0430\u043d\u0443"}),(0,m.jsx)(a.A,{variant:"body1",gutterBottom:!0,align:"center",color:"text.secondary",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0442\u0435 Excel \u0430\u0431\u043e Word \u0444\u0430\u0439\u043b \u0437 \u043d\u0430\u0432\u0447\u0430\u043b\u044c\u043d\u0438\u043c \u043f\u043b\u0430\u043d\u043e\u043c \u0430\u0431\u043e \u0432\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0456\u044e"}),(0,m.jsx)(h,{onFileSelected:async e=>{r(!0);try{let r;console.log("Single file selected"),r=await l.l.importSingleFile(Array.isArray(e)?e[0]:e),console.log(r)}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",t)}finally{r(!1)}},onDirectorySelected:async(e,t)=>{r(!0);try{const r=new(x());t.forEach((e=>{const t=e.webkitRelativePath;r.file(t,e)}));const o=await r.generateAsync({type:"blob"}),n=new FormData;n.append("file",o,`${e}.zip`);const a=await l.l.importDirectory(n);console.log("Directory imported successfully:",a.data)}catch(o){console.error("Error importing directory:",o)}finally{r(!1)}},acceptedFileTypes:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},maxFiles:1})]})}}}]);
//# sourceMappingURL=657.07ae868d.chunk.js.map